version: '2'

services:
  elasticsearch:
    image: elasticsearch:2.3.5
    #build: .
    ports:
     - "9300:9300"
     - "9200:9200"
    #volumes: 
    # - ./build:/build:rw
    #command: sh /build/start.sh
  datacollector:
    image: streamsets/datacollector:1.5.1.2
    ports:
     - "18630:18630"
    depends_on:
     - elasticsearch
    volumes:
     - ./streamsets:/data:rw
  kibana:
    image: kibana:4.5.4
    ports:
      - 5601:5601
    environment:
      - ELASTICSEARCH_URL=http://elasticsearch:9200
    depends_on:
      - elasticsearch
  inserting_data:
    build: .
    volumes: 
     - ./build:/build:rw
    command: sh /build/start.sh
    depends_on:
      - elasticsearch
      - kibana
    
 
#  minecraft-server:
#    ports:
#      - "25565:25565"
#    environment:
#      EULA: "TRUE"
#      TYPE: "SPIGOT"
#      VERSION: "1.10.2"
#    image: itzg/minecraft-server
#    container_name: mc
#    tty: true
#    stdin_open: true
#    restart: always
#    volumes:
#     - ./mcdata:/data
# assing a nice name to volume
volumes: 
    datacollectordata:
